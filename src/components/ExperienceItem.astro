---
import { cn } from "@/lib/utils";
import TechBadge from "./TechBadge.astro";

interface Props {
  role: string;
  company: string;
  period: string;
  description: string;
  techStack?: string[];
  current?: boolean;
  class?: string;
}

const { role, company, period, description, techStack = [], current = false, class: className } = Astro.props;
---

<div class={cn("relative", className)}>
  <span class={cn("absolute -left-[32px] top-1 flex h-4 w-4 items-center justify-center rounded-full ring-4 ring-background", current ? "bg-primary" : "bg-muted-foreground/30")}></span>
  <div class="flex flex-col gap-1 sm:flex-row sm:items-center sm:justify-between">
    <h3 class="text-lg font-bold">{role}</h3>
    <span class="text-xs text-muted-foreground font-mono bg-muted px-2 py-1 rounded">{period}</span>
  </div>
  <p class="text-foreground/80 font-medium mt-1">{company}</p>
  <p class="mt-3 text-muted-foreground text-sm leading-relaxed">
    {description}
  </p>
  {techStack.length > 0 && (
    <div class="mt-4 flex flex-wrap gap-2">
      {techStack.map((tech) => (
        <TechBadge name={tech} variant="secondary" class="text-[10px]" />
      ))}
    </div>
  )}
</div>
