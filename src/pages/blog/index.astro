---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import Card from "@/components/ui/Card.astro";
import { Image } from "@unpic/astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Blog">
  <div class="flex flex-col items-start gap-4 md:flex-row md:justify-between md:gap-8">
    <div class="flex-1 space-y-4">
      <h1 class="inline-block font-heading text-4xl font-bold tracking-tight lg:text-5xl text-gradient">
        Blog
      </h1>
      <p class="text-xl text-muted-foreground">
        A collection of thoughts, tutorials, and guides.
      </p>
    </div>
  </div>
  <hr class="my-8 border-border/40" />
  <div class="grid gap-10 sm:grid-cols-2">
    {
      posts.map((post) => (
        <article class="group relative flex flex-col space-y-2">
          {post.data.heroImage && (
            <Image
              src={post.data.heroImage}
              alt={post.data.title}
              width={804}
              height={452}
              class="rounded-md border border-border/40 bg-muted transition-colors"
            />
          )}
          <h2 class="text-2xl font-bold tracking-tight">{post.data.title}</h2>
          <p class="text-muted-foreground">{post.data.description}</p>
          <div class="text-sm text-muted-foreground">
             <FormattedDate date={post.data.pubDate} />
          </div>
          <a href={`/blog/${post.id}`} class="absolute inset-0">
            <span class="sr-only">View Article</span>
          </a>
        </article>
      ))
    }
  </div>
</BaseLayout>
