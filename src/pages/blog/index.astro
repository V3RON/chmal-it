---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import FormattedDate from "../../components/FormattedDate.astro";
import { ArrowRight } from "lucide-astro";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<BaseLayout title="Blog">
  <div class="flex flex-col items-start gap-4 md:flex-row md:justify-between md:gap-8">
    <div class="flex-1 space-y-4">
      <h1 class="inline-block font-heading text-4xl font-bold tracking-tight lg:text-5xl text-gradient">
        Blog
      </h1>
      <p class="text-xl text-muted-foreground">
        A collection of thoughts, tutorials, and guides.
      </p>
    </div>
  </div>
  <hr class="my-8 border-border/40" />
  <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {
      posts.map((post) => (
        <a href={`/blog/${post.id}`} class="group relative flex flex-col justify-between overflow-hidden rounded-xl border border-border/50 bg-muted/20 p-6 transition-all hover:bg-muted/40 hover:shadow-lg hover:-translate-y-1">
          <div class="space-y-4">
            <h3 class="font-bold text-xl leading-tight decoration-2 decoration-primary/50">{post.data.title}</h3>
            <p class="text-muted-foreground line-clamp-3 leading-relaxed">
              {post.data.description}
            </p>
          </div>
          <div class="mt-6 flex items-center justify-between text-sm text-muted-foreground">
            <FormattedDate date={post.data.pubDate} />
            <ArrowRight class="h-4 w-4 opacity-0 transition-all -translate-x-2 group-hover:opacity-100 group-hover:translate-x-0" />
          </div>
        </a>
      ))
    }
  </div>
</BaseLayout>
